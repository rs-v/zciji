(function(){function k(b){this.url=[];this.init(b)}var m,n,r,g,p,y,t,u,v,x="ied3.2.1";window._refDomain;if("undefined"==typeof w)var w=1;k.prototype={init:function(b){b?g=b:g={};m=document;if(!g.statIframe&&window!=top)try{m=top.document}catch(a){}n=m.location;r=m.body;_tt=[]},PTTInfo:function(){window.PTTRun=new PTT;PTTRun.virtualURL=this.getDomainInfo().replace(/dm=|&url=/g,"");var b=[];b.push("pttplat="+PTTRun.plat);b.push("pttsitetype="+PTTRun.project+PTTRun.siteType);b.push("pttpagetype="+PTTRun.pageType);
b.push("pttpagename="+encodeURIComponent(PTTRun.pageName));var a=b.join("&").trimAll();console.log(decodeURI(b.join(";\n")));return a},run:function(){(new Date).getTime();l.init();this.url.push(this.getDomainInfo());this.url.unshift("//pingfore."+t+"/pingd?");this.url.push(this.getRefInfo(g));var b=escape(this.PTTInfo());try{navigator.cookieEnabled?this.url.push("&pvid="+l.setCookie("pgv_pvid",!0)):this.url.push("&pvid=NoCookie")}catch(a){this.url.push("&pvid=NoCookie")}this.url.push(this.getMainEnvInfo());
this.url.push(this.getExtendEnvInfo());this.url.push("&vs="+x);g.userDefineVariable?this.url.push(z.setv(g.userDefineVariable)):this.url.push(z.setv());l.setCookie("ssid");l.save();g.originalReferer&&this.url.push("&or="+g.originalReferer);(new Date).getTime();this.url.push("&ext="+b);this.url.push("&reserved1="+escape(g.reserved1Param||""));this.url.push("&rand="+Math.round(1E5*Math.random()));(b=this.getSud())&&_tt.push("su="+escape(b.substring(0,256)));this.url.push("&tt="+escape(_tt.join(";")));
this.sendInfo(this.url.join(""));this.url[0]="//iedtcss.qq.com/heatmap?";this.watchHot(this.url.join(""));g.hot&&(document.attachEvent?document.attachEvent("onclick",function(a){pgvWatchClick(a)}):document.addEventListener("click",function(a){pgvWatchClick(a)},!1));g.repeatApplay&&"true"==g.repeatApplay&&"undefined"!=typeof w&&(w=1)},getSud:function(){return g.sessionUserType?g.sessionUserType:this.getParameter(g.sudParamName||"sessionUserType",m.URL)},getDomainInfo:function(b){var a;p=g.virtualDomain||
n.host;var c=p.toLowerCase();t||(t=this.getCookieSetDomain());b&&(b=c.indexOf(":"),-1<b?c=c.substr(0,b)+".hot"+c.substr(b):c+=".hot");return a=this.getCurrentUrl(),"dm="+c+"&url="+a},getCurrentUrl:function(){var b="-";if(g.virtualURL)var a=g.virtualURL;else if(a=y=escape(n.pathname),""!=n.search&&(b=escape(n.search.substr(1))),g.senseParam){var c=this.getParameter(g.senseParam,m.URL);c&&(a+="_"+c)}return a+"&arg="+b},getRefInfo:function(b){var a="-",c="-",d="-",e=m.referrer,f=b.virtualDomain?b.virtualDomain:
"-",q=b.virtualURL?b.virtualURL:"-";_refDomain=b.virtualRefDomain?b.virtualRefDomain:"";u=b.virtualRefURL?b.virtualRefURL:"";if(b.statIframe||"true"==b.useCookie){e=l.get("pgvReferrer=");var h=m.URL;f=h.indexOf("?");-1<f&&(h=h.substr(0,f));l.set("pgvReferrer",h)}else"set"==b.useCookie&&""!=_refDomain&&""!=u?(h="https:"==n.protocol?"https://":"//",h+=_refDomain+refUrl,l.set("pgvReferrer",h)):"set"!=b.useCookie||"-"==f&&"-"==q?("get"==b.useCookie&&(h=l.get("pgvReferrer="),""!=h&&(e=h)),l.set("pgvReferrer",
"")):(h="https:"==n.protocol?"https://":"//",h+="-"==f?p:f,h+="-"==q?y:q,l.set("pgvReferrer",h));(h=this.getParameter(b.tagParamName||"ADTAG",m.URL))&&(a="ADTAG",c=h);h=e.indexOf("://");-1<h&&"-"==a&&(h=e.match(/(\w+):\/\/([^:|\/]+)(:\d*)?(.*\/)([^#|\?|\n]+)?(#.*)?(\?.*)?/i))&&(a=h[2],c=h[4]+h[5]);-1!=e.indexOf("?")&&(h=e.indexOf("?")+1,d=e.substr(h));""!=_refDomain&&"false"==b.useCookie&&(a=_refDomain);""!=u&&"false"==b.useCookie&&(c=u);_refDomain=a;u=escape(c);e=l.get("ied_rf=",!0);b=l.get("ied_qq=",
!0);if("-"==e||"ADTAG"==a||"--"==e||-1==e.indexOf("ADTAG")&&"-"!=a)a+=c,128<a.length&&(a=a.substring(0,128)),e=a,a=new Date,a.setDate(a.getDate()+1),a.setHours(a.getHours()-a.getHours()),a.setMinutes(a.getMinutes()-a.getMinutes()),a.setSeconds(a.getSeconds()-a.getSeconds()),a="ied_rf="+e+";path=/;domain="+this.getCookieSetDomain(!0)+";expires="+a.toGMTString(),m.cookie=a;return"&rdm="+_refDomain+"&rurl="+u+"&rarg="+escape(d)+"&ied_rf="+e+"&ied_qq="+b},getMainEnvInfo:function(){var b="";try{var a=
"-",c="-",d="-",e="-",f="-",q="-",h=0,g=navigator;self.screen&&(a=screen.width+"x"+screen.height,c=screen.colorDepth+"-bit");g.language?d=g.language.toLowerCase():g.browserLanguage&&(d=g.browserLanguage.toLowerCase());h=g.javaEnabled()?1:0;e=g.cpuClass;f=g.platform;q=(new Date).getTimezoneOffset()/60;b="&scr="+a+"&scl="+c+"&lang="+d+"&java="+h+"&cc="+e+"&pf="+f+"&tz="+q}catch(B){}finally{return b}},getExtendEnvInfo:function(){var b="";try{var a=n.href,c="-";b+="&flash="+this.getFlashInfo();r.addBehavior&&
(r.addBehavior("#default#homePage"),r.isHomePage(a)&&(b+="&hp=Y"));r.addBehavior&&(r.addBehavior("#default#clientCaps"),c=r.connectionType);b+="&ct="+c}catch(d){}finally{return b}},getFlashInfo:function(){var b="-",a=navigator;try{if(a.plugins&&a.plugins.length)for(var c=0;c<a.plugins.length;c++){if(-1<a.plugins[c].name.indexOf("Shockwave Flash")){b=a.plugins[c].description.split("Shockwave Flash ")[1];break}}else if(window.ActiveXObject)for(c=12;5<=c;c--)try{if(eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+
c+"');")){b=c+".0";break}}catch(d){}}catch(d){}return b},getParameter:function(b,a){return b&&a?(b=a.match(new RegExp("(\\?|#|&)"+b+"=([^&^#]*)(#|&|$)")))?b[2]:"":""},getCookieSetDomain:function(b){var a,c,d=[];for(c=a=0;c<p.length;c++)"."==p.charAt(c)&&(d[a]=c,a++);a=d.length;-1<p.indexOf(".cn")&&a--;c="qq.com";1==a?c=p:1<a&&(c=p.substring(d[a-2]+1));if(b)switch(a){case 1:case 2:c=p;break;default:c=p.substring(d[a-3]+1)}return c},watchClick:function(b){try{var a=!0,c="";var d=window.event?window.event.srcElement:
b.target;switch(d.tagName){case "A":c="<A href="+d.href+">"+d.innerHTML+"</a>";break;case "IMG":c="<IMG src="+d.src+">";break;case "INPUT":c="<INPUT type="+d.type+" value="+d.value+">";break;case "BUTTON":c="<BUTTON>"+d.innerText+"</BUTTON>";break;case "SELECT":c="SELECT";break;default:a=!1}if(a){var e=new k(g),f=e.getElementPos(d);if(g.coordinateId){var q=e.getElementPos(document.getElementById(g.coordinateId));f.x-=q.x}e.url.push(e.getDomainInfo(!0));e.url.push("&hottag="+escape(c));e.url.push("&hotx="+
f.x);e.url.push("&hoty="+f.y);e.url.push("&rand="+Math.round(1E5*Math.random()));e.url.unshift("//pinghot."+t+"/pingd?");e.sendInfo(e.url.join(""))}}catch(h){}},getElementPos:function(b){if(null===b.parentNode||"none"==b.style.display)return!1;var a=navigator.userAgent.toLowerCase(),c=null,d;if(b.getBoundingClientRect){var e,f,q,h;return d=b.getBoundingClientRect(),e=Math.max(document.documentElement.scrollTop,document.body.scrollTop),f=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),
q=document.body.clientTop,h=document.body.clientLeft,{x:d.left+f-h,y:d.top+e-q}}if(document.getBoxObjectFor)d=document.getBoxObjectFor(b),d=[d.x-(b.style.borderLeftWidth?Math.floor(b.style.borderLeftWidth):0),d.y-(b.style.borderTopWidth?Math.floor(b.style.borderTopWidth):0)];else{d=[b.offsetLeft,b.offsetTop];c=b.offsetParent;if(c!=b)for(;c;)d[0]+=c.offsetLeft,d[1]+=c.offsetTop,c=c.offsetParent;if(-1<a.indexOf("opera")||-1<a.indexOf("safari")&&"absolute"==b.style.position)d[0]-=document.body.offsetLeft,
d[1]-=document.body.offsetTop}for(b.parentNode?c=b.parentNode:c=null;c&&"BODY"!=c.tagName&&"HTML"!=c.tagName;)d[0]-=c.scrollLeft,d[1]-=c.scrollTop,c.parentNode?c=c.parentNode:c=null;return{x:d[0],y:d[1]}},getPos:function(b,a,c,d){a=a||document;b=b||window.event;var e={};b.pageX||b.pageY?e={x:b.pageX,y:b.pageY}:e={x:b.clientX+Math.max(a.documentElement.scrollLeft,a.body.scrollLeft)-a.body.clientLeft,y:b.clientY+Math.max(a.documentElement.scrollTop,a.body.scrollTop)-a.body.clientTop};e.x+=c||0;e.y+=
d||0;return e.x=e.x-Math.max(Math.max(document.body.clientWidth,document.body.offsetWidth),Math.max(document.body.scrollWidth,document.documentElement.scrollWidth))/2+window.screen.width/2-(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>("undefined"==typeof window.innerHeight?document.documentElement.clientHeight:window.innerHeight)?8.5:0),e},sendHeat:function(b,a){b+="&x="+a.x+"&y="+a.y+"&r3="+Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);
(new Image).src=b},clickHeat:function(b,a){this.sendHeat(b,this.getPos(a))},heapClick:function(b,a){var c=function(a,b,d){var c=function(a){a=window.event||a;target=a.srcElement||a.target;d(a,target)};a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},d=this;if(a)d.clickHeat(b,evt);else{a=document;c(a,"click",function(a){d.sendHeat(b,d.getPos(a))});var e=a.getElementsByTagName("iframe"),f=0;for(a=e.length;f<a;f++)try{(function(){var a=e[f],h=a.contentWindow.document;c(h,"click",function(c,
e){e=d.getElementPos(a);d.sendHeat(b,d.getPos(c,h,e.x,e.y))})})()}catch(q){}}},watchHot:function(b){var a=window.location,c=a.pathname,d=this;this.loadScript("//tiem-cdn.qq.com/js/mms/heatmap/"+a.hostname+".js?random="+ +new Date,function(){var a;if(window._Cnf&&window._Cnf.isValid&&(a=window._Cnf.url)){a=a.split("|");for(var f=0;f<a.length;f++)if(a[f]==c){d.heapClick(b);break}}})},loadScript:function(b,a){var c=-1==navigator.userAgent.indexOf("MSIE")?!1:!0,d=document.createElement("script"),e=document.getElementsByTagName("BODY").item(0);
d.type="text/javascript";d.onerror=function(){"function"==typeof a&&a();d=null};c?d.onreadystatechange=function(){if("complete"==this.readyState.toLowerCase()||"loaded"==this.readyState.toLowerCase())1!=this.$funExeced&&"function"==typeof a&&(this.$funExeced=!0,e.removeChild(d),a()),d=null}:d.onload=function(){"function"==typeof a&&(a(),e.removeChild(d));d=null};d.src=b;e.appendChild(d)},sendClickForPTT:function(){g.hottag&&(this.url.push(this.getDomainInfo(!0)),this.url.push("&hottag="+g.hottag),
this.url.push("&hotx=9999&hoty=9999"),this.url.push("&rand="+Math.round(1E5*Math.random())),this.url.unshift("//pinghot."+t+"/pingd?"),this.sendInfo(this.url.join("")))},hrefClick:function(b,a){g.hottag&&(this.url.push(this.getDomainInfo(!0)),this.url.push("&hottag="+escape(g.hottag)),this.url.push("&hotx=9999&hoty=9999"),this.url.push("&rand="+Math.round(1E5*Math.random())),this.url.unshift("//pinghot."+t+"/pingd?"));return this.sendInfoHref(this.url.join(""),b,a)},tgideasCount:function(b){this.sendInfo("http://pinghot.qq.com/pingd?dm=tgideas.qq.com.hot&url=/&hottag="+
encodeURIComponent(b)+"&hotx=9999&hoty=9999&rand="+Math.round(1E5*Math.random()))},sendInfo:function(b){window.navigator.sendBeacon?window.navigator.sendBeacon(b):(v=new Image(1,1),v.src=b)},sendInfoHref:function(b,a,c){var d="undefined"!=typeof c&&"undefined"!=typeof c.debug&&c.debug;if("undefined"!=typeof c&&"function"==typeof c.onBeforeReport&&!c.onBeforeReport())return!0;d&&alert("Ready to report.");v=new Image(1,1);v.src=b;v.onload=v.onerror=function(){d&&alert("Reported,url: "+b);"undefined"!=
typeof c&&"function"==typeof c.onBeforeJump?c.onBeforeJump()&&(d&&alert("Ready to jump."),location.href=a):(d&&alert("Ready to jump."),location.href=a)};return!1}};var z={vscope:{page:3,session:2,user:1},setv:function(b){if(!(b&&b.name&&""!=b.name&&b.value&&""!=b.value&&b.scope)||1>b.scope||3<b.scope)var a="-"==l.get("custvar=")?l.get("custvar=",!0):l.get("custvar=");else switch(a=b.name+":"+b.value,b.scope){case this.vscope.session:l.setCookie("custvar",!1,a);break;case this.vscope.user:l.setCookie("custvar",
!0,a)}return"&custvar="+a}},l={sck:[],sco:{},init:function(){var b=this.get("pgv_info=",!0);if("-"!=b){b=b.split("&");for(var a=0;a<b.length;a++){var c=b[a].split("=");this.set(c[0],unescape(c[1]))}}},get:function(b,a){var c=a?m.cookie:this.get("pgv_info=",!0),d="-";var e=c.indexOf(b);-1<e&&(e+=b.length,b=c.indexOf(";",e),-1==b&&(b=c.length),a||(a=c.indexOf("&",e),-1<a&&(b=Math.min(b,a))),d=c.substring(e,b));return d},set:function(b,a){this.sco[b]=a;a=!1;for(var c=this.sck.length,d=0;d<c;d++)if(b==
this.sck[d]){a=!0;break}a||this.sck.push(b)},setCookie:function(b,a,c){var d=l.get(b+"=",a);"-"!=d||c?d=c?c:d:(a?d="":d="s",c=(new Date).getUTCMilliseconds(),d+=Math.round(2147483647*Math.abs(Math.random()-1))*c%1E10);return a?this.saveCookie(b+"="+d,"expires=Sun, 18 Jan 2038 00:00:00 GMT;"):this.set(b,d),d},save:function(){if(g.sessionSpan){var b=new Date;b.setTime(b.getTime()+6E4*g.sessionSpan)}for(var a="",c=this.sck.length,d=0;d<c;d++)a+=this.sck[d]+"="+this.sco[this.sck[d]]+"&";a="pgv_info="+
a.substr(0,a.length-1);c="";b&&(c="expires="+b.toGMTString());this.saveCookie(a,c)},saveCookie:function(b,a){m.cookie=b+";path=/;domain="+t+";"+a}};window.pgvMain=function(b,a){var c="";a?(c=a,x="oied3.2.1"):(c=b,x="ied3.2.1");try{1==w&&(w=2,"undefined"!=typeof PTTDate&&(PTTRun.newStayTime(Math.round((new Date-PTTDate)/1E3)),PTTDate=new Date),(new k(c)).run(),"undefined"==typeof PTTDate&&(window.PTTDate=new Date,PTTRun.addEvent(window,"onpagehide"in window?"pagehide":"unload",function(){PTTRun.newStayTime(Math.round((new Date-
PTTDate)/1E3))})),PTTRun.autoSend(),"function"==typeof PTTCallback&&PTTCallback(),window.onerror=function(a,b,c){MossoSendClick("ptterror",a+"|||"+b.split("?")[0]+"|||"+c,PTTRun.PTTSystem+PTTRun.PTTSystemVer+"|||"+PTTRun.PTTBrowser+PTTRun.PTTBrowserVer+"|||"+PTTRun.PTTNetType,PTTRun.virtualURL)},PTTPerformanceTiming=function(){var a=window.performance,b=this;if(a){var c=a.timing,g,h,k;b.detectPage=function(){window.setTimeout(function(){0<c.loadEventEnd?b.reportData():b.detectPage()},50)};b.reportData=
function(){var a=PTTRun.PTTSystem+PTTRun.PTTSystemVer+"|||"+PTTRun.PTTBrowser+PTTRun.PTTBrowserVer+"|||"+PTTRun.PTTNetType;g=(c.loadEventEnd-c.navigationStart)/1E3;MossoSendClick("pttloadpage",5<g?"C":3<g?"B":1<g?"A":"S",a,PTTRun.virtualURL);h=(c.domComplete-c.responseEnd)/1E3;MossoSendClick("pttdomready",1>h?"S":"A",a,PTTRun.virtualURL);k=(c.domInteractive-c.navigationStart)/1E3;MossoSendClick("pttblank",1.5<k?"C":1<k?"B":.5<k?"A":"S",a,PTTRun.virtualURL)};b.detectPage()}else console.log("\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 performance \u63a5\u53e3")},
PTTPerformanceTiming())}catch(d){}};window.pgvSendClickForPTT=function(b){(new k(b)).sendClickForPTT()};window.pgvSendClick=function(b){if("undefined"!=typeof setSite&&"undefined"!=typeof PTTSendClick){var a=b.hottag?b.hottag.split("."):0;if(b.hottag&&2<=a.length){var c=a[a.length-2].trimAll(),d=a[a.length-1].trimAll();console.log(decodeURI(c+":"+d))}else console.error("PTT\u7ec4\u4ef6\u63d0\u793a\uff1a\u60a8\u7684\u6309\u94ae\u53c2\u6570\u6709\u8bef");PTTSendClick(c,d,"\u65e7\u57cb\u70b9")}else pgvSendClickForPTT(b)};
window.pgvWatchClick=function(b){(new k(b)).watchClick(b)};window.pgvHref=function(b,a,c){if("undefined"==typeof a||null==a)return(new k(b)).sendClickForPTT(),!1;"string"!=typeof a&&(a=a.getAttribute("href"));return"undefined"!=typeof c?(new k(b)).hrefClick(a,c):(new k(b)).hrefClick(a)};window.PTT=function(){console.log("\u60a8\u6b63\u5728\u4f7f\u7528PTT\u6570\u636e\u4e0a\u62a5\u7ec4\u4ef6\uff0c\u5e2e\u52a9\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/");var b=this;b.PTTDomain=document.referrer;
b.addEvent=function(a,b,d){a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener(b,d,!1)};b.getParameterByName=function(a){a=a.toLowerCase().replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(window.location.search.toLowerCase());return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))};b.getData=function(a){a+="=";for(var b=document.cookie.split(";"),d=0,e=b.length;d<e;d++){for(var f=b[d];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return unescape(f.substring(a.length,
f.length))}return!1};b.setData=function(a,b,d,e){d=d||0;e=e||"/";var c="";0!=d&&(c=new Date,c.setTime(c.getTime()+864E5*d),c="; expires="+c.toGMTString());document.cookie=a+"="+escape(b)+c+"; path="+e};b.getSession=function(a){if(window.sessionStorage)return sessionStorage.getItem(a);a+="=";for(var b=document.cookie.split(";"),d=0,e=b.length;d<e;d++){for(var f=b[d];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return unescape(f.substring(a.length,f.length))}return!1};String.prototype.trimAll=
function(){return this.replace(/\s/g,"")};Number.prototype.replace=function(){return this+""};b.splitVirtualStr=function(a){var b=["",""];a&&(a=a&&-1==a.indexOf("//")?a:a.split("//")[1],/^\//.test(a)?b[1]=a:-1==a.indexOf("/")?b[0]=a:(b[0]=a.substring(0,a.indexOf("/")),b[1]=a.substring(a.indexOf("/"),a.length)));return b};window.MossoSendClick=function(a,c,d,e){if("undefined"==typeof setSite)return console.error("PTT\u7ec4\u4ef6\u63d0\u793a\uff1a\u60a8\u9700\u8981\u5728\u9875\u9762\u91cc\u914d\u7f6esetSite,\u5426\u5219\u5c06\u65e0\u6cd5\u91c7\u96c6\u7edf\u8ba1\u6570\u636e,\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/"),
!1;a=""==a||"undefined"==typeof a?"":"_"+a.replace(/_|\./g,"*-*");c=""==c||"undefined"==typeof c?"":"_"+c.replace(/_|\./g,"*-*");d="undefined"==typeof d?"":d.replace(/_|\./g,"*-*");a=(b.plat+"."+b.project+b.siteType+"."+b.pageType+a+c+"_"+d+"."+b.from).trimAll();a=encodeURIComponent(a);b.getData("PTTdebug")&&"0"==b.getData("PTTdebug")||console.log(decodeURI("a:"+a));e=b.splitVirtualStr(e);pgvSendClickForPTT({hottag:a,virtualDomain:e[0],virtualURL:e[1]})};window.PTTSendClick=function(a,c,d,e){if("undefined"==
typeof setSite)return console.error("PTT\u7ec4\u4ef6\u63d0\u793a\uff1a\u60a8\u9700\u8981\u5728\u9875\u9762\u91cc\u914d\u7f6esetSite,\u5426\u5219\u5c06\u65e0\u6cd5\u91c7\u96c6\u7edf\u8ba1\u6570\u636e,\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/"),!1;MossoSendClick(a,c,d,e);a=b.project+b.oldSiteType+"."+b.pageType+(""==a||"undefined"==typeof a?"":"."+a)+(""==c||"undefined"==typeof c?"."+b.from:"."+c);a=a.trimAll();b.getData("PTTdebug")&&"0"==b.getData("PTTdebug")||console.log(decodeURI("b:"+
a));e=b.splitVirtualStr(e);pgvSendClickForPTT({hottag:a,virtualDomain:e[0],virtualURL:e[1]})};window.PTTDebug=function(a){b.setData("PTTdebug",a)};b.unitParams=function(){var a=navigator.userAgent.toLowerCase();b.osact="undefined"==typeof setSite?!1:"os"==setSite.siteType.toLowerCase()?0:"undefined"!=typeof setSite.osact||b.getParameterByName("osact")?1*setSite.osact||1*b.getParameterByName("osact"):0;b.project=function(){var a="base ingame doujin match story history fans coming bbs other".split(" ");
if("undefined"!=typeof setSite&&"undefined"==typeof setSite.project)return"undefined"!=typeof setSite.siteType&&"os"==setSite.siteType.toLowerCase()?"base_":"other_";if(-1!=a.join("*_*").indexOf(setSite.project.replace(/_|\./g,"*-*")))return setSite.project.replace(/_|\./g,"*-*")+"_";console.error("PTT\u7ec4\u4ef6\u63d0\u793a\uff1a\u60a8\u8bbe\u7f6e\u7684project\u53c2\u6570\u503c\u6709\u8bef\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u8bbe\u7f6e\u503c\u4e3a:"+a.join(",")+"\u8bf7\u68c0\u67e5")}();if("undefined"==
typeof setSite||"undefined"==typeof setSite.siteType){console.error("PTT\u7ec4\u4ef6\u63d0\u793a\uff1a\u60a8\u8fd8\u672a\u914d\u7f6esetSite.siteType\u7684\u503c,\u5c06\u65e0\u6cd5\u91c7\u96c6\u7edf\u8ba1\u6570\u636e,\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/");var c=void 0}else c="os"!=setSite.siteType?"1"==b.osact?setSite.siteType.toLowerCase().replace(/_|\./g,"*-*")+"_osact":setSite.siteType.toLowerCase().replace(/_|\./g,"*-*"):"os";b.siteType=c;"undefined"==typeof setSite||"undefined"==
typeof setSite.pageType?(console.error("PTT\u7ec4\u4ef6\u63d0\u793a\uff1a\u60a8\u9700\u8981\u914d\u7f6esetSite.pageType\u7684\u503c,\u5426\u5219\u5c06\u65e0\u6cd5\u91c7\u96c6\u7edf\u8ba1\u6570\u636e,\u6587\u6863\u53c2\u9605:http://tgideas.qq.com/ptt/"),c=void 0):c=setSite.pageType.replace(/_|\./g,"*-*");b.pageType=c;c="undefined"!=typeof setSite&&"undefined"!=typeof setSite.pageName?setSite.pageName.replace(/_|\./g,"*-*"):void 0;b.pageName=c;c=-1!=a.indexOf("msdk")||-1!=a.indexOf("ingame")||"undefined"!=
typeof pandora?1:0;b.ingame=c;b.plat=function(){var d="",c="",f=b.getData("PTTcookiesFrom");b.ingame?(d="dcv_ingame",c=-1!=a.indexOf("msdk")?"msdk":-1!=a.indexOf("ingame")?"uaingame":"undefined"!=typeof pandora?"pandora":"ingame"):-1!=a.indexOf("qq/")?(d="dcv_qq",c="qq_article"):-1!=a.indexOf("micromessenge")?(d="dcv_wx",c="wx_article","wx"==b.getSession("channel")&&(c="wx_menu")):-1!=a.indexOf("weibo")?c="sina_weibo":d=-1<a.indexOf("iphone")||-1<a.indexOf("ipad")||-1<a.indexOf("ipod")||-1<a.indexOf("android")?
"dcv_other":"dcv_pc";f||b.setData("PTTcookiesFrom",c);return d}();b.from=function(){var a=b.getData("PTTcookiesFrom"),c=b.getSession("channel");a||"undefined"==typeof b.PTTDomain||(-1<b.PTTDomain.indexOf("baidu.com")?a="seo_baidu":-1<b.PTTDomain.indexOf("sogou.com")?a="seo_sogou":-1<b.PTTDomain.indexOf("sm.cn")?a="seo_sm":-1<b.PTTDomain.indexOf("so.com")?a="seo_360":-1<b.PTTDomain.indexOf("bing.com")?a="seo_bing":-1<b.PTTDomain.indexOf("google.com")&&(a="seo_google"));if(b.getParameterByName("adtag")){a=
[];for(var f=b.getParameterByName("adtag").split("."),g=0,h=f.length;g<h;g++)3>g&&a.push(f[g]);a="adtag_"+a.join("_");b.setData("PTTcookiesFrom",a)}c&&-1!=c.indexOf("seo")&&(a=c);a||(a="other");b.setData("PTTcookiesFrom",a);return a}();b.oldSiteType="os"==b.siteType?"dcv_pc"==b.plat?"gwpc":"1"==b.ingame?"ingame":"gwm":b.siteType;b.oldUser=function(){var a=b.getData("PTTuserFirstTime");if(a)return a=(new Date).getTime()-a,a/=864E5,60<a?"is2MonthUser":30<a?"is1MonthUser":14<a?"is2WeekUser":"old";b.setData("PTTuserFirstTime",
(new Date).getTime(),365);return"newUsers"}();b.reach=function(){var a=b.getData("PTTweekStartTime"),c=b.getData("PTTweekPerSession"),f=b.getData("PTTperWeekNum")?b.getData("PTTperWeekNum"):0;if(a){if(c)return"";b.setData("PTTweekPerSession",(new Date).getTime());f++;b.setData("PTTperWeekNum",f,7);MossoSendClick("reach","reach"+f,"\u5468\u8bbf",PTTRun.virtualURL)}else b.setData("PTTperWeekNum",1,7),b.setData("PTTweekStartTime",(new Date).getTime(),7),MossoSendClick("reach","reach1","\u5468\u8bbf",
PTTRun.virtualURL)};b.routeLine=function(){if("undefined"==typeof setSite||"undefined"==typeof setSite.siteType)return!1;var a=b.getData("PTTrouteLine")?b.getData("PTTrouteLine")+"_":"";if(7>=a.split("_").length){var c="os"!=setSite.siteType?b.siteType.split("_")[0]:b.pageType;a+=c;b.setData("PTTrouteLine",a);MossoSendClick("route",a,"\u8def\u5f84",PTTRun.virtualURL)}else return""};b.getAv=function(){var a=b.getData("PTTosav"),c=b.getData("PTTav");if(-1!=b.siteType.indexOf("os")||-1!=b.siteType.indexOf("_osact")){if(a)return"";
b.setData("PTTosav","osav",365);MossoSendClick("osav","","\u5b98\u7f51\u5386\u603b",PTTRun.virtualURL)}else{if(c)return"";b.setData("PTTav","actav",365,location.pathname.substring(0,location.pathname.lastIndexOf("/")+1));MossoSendClick("actav","","\u4e13\u9898\u5386\u603b",PTTRun.virtualURL)}};b.PTTSystem=function(){var b=navigator.platform.toLowerCase();return-1!=a.indexOf("android")?"android":-1!=a.indexOf("iphone")?"iphone":-1!=a.indexOf("ipad")?"ipad":-1!=a.indexOf("ipod")?"ipod":"win32"==b||
"windows"==b?"windows":"mac68k"==b||"macppc"==b||"macintosh"==b||"macIntel"==b?"mac":"x11"==b?"unix":"other"}();b.PTTSystemVer=function(){switch(b.PTTSystem){case "android":var d=-1!=a.indexOf("android/")?a.substr(a.indexOf("android")+8,a.indexOf(" ",a.indexOf("android"))-a.indexOf("android")-8).split(" ")[0]:a.substr(a.indexOf("android")+8,a.indexOf(";",a.indexOf("android"))-a.indexOf("android")-8).split(" ")[0];break;case "iphone":d="iphone os";d=a.substr(a.indexOf(d)+10,a.indexOf(" like ",a.indexOf(d))-
a.indexOf(d)-10);break;case "windows":d=-1<a.indexOf("windows nt 5.0")||-1<a.indexOf("windows 2000")?"win2000":-1<a.indexOf("windows nt 5.1")||-1<a.indexOf("windows xp")?"winXP":-1<a.indexOf("windows nt 5.2")||-1<a.indexOf("windows 2003")?"win2003":-1<a.indexOf("windows nt 6.0")||-1<a.indexOf("windows vista")?"winVista":-1<a.indexOf("windows nt 6.1")||-1<a.indexOf("windows 7")?"win7":-1<a.indexOf("windows nt 6.2")||-1<a.indexOf("windows 8")?"win8":-1<a.indexOf("windows nt 10")||-1<a.indexOf("windows 10")?
"win10":"other";break;case "ipad":d=a.substr(a.indexOf("cpu os")+7,a.indexOf(" like ",a.indexOf("cpu os"))-a.indexOf("cpu os")-7);break;case "mac":d=a.substr(a.indexOf("intel mac os x")+15,a.indexOf(")",a.indexOf("intel mac os x"))-a.indexOf("intel mac os x")-15);break;case "ipod":d=a.substr(a.indexOf(d)+10,a.indexOf(" like ",a.indexOf(d))-a.indexOf(d)-10);break;default:d="unknown"}return d}();b.detectBrowser=function(){var d="";var c=b.PTTSystem;switch("android"==c||"iphone"==c||"ipad"==c||"ipod"==
c?"mobile":"pc"){case "mobile":-1!=a.indexOf("msdk")?(c="msdk",d=a.split("msdk/")[1]):-1!=a.indexOf("micromessenger")?(c="weixin",d=a.split("micromessenger/")[1].split(" ")[0]):-1!=a.indexOf("qq/")?(c="qq",d=a.split("qq/")[1].split(" ")[0]):-1!=a.indexOf("mqqbrowser")?(c="mqqbrowser",d=a.split("mqqbrowser/")[1].split(" ")[0]):-1!=a.indexOf("weibo")?(c="sina",d=a.split("applewebkit/")[1].split(" ")[0]):-1!=a.indexOf("ucbrowser")?(c="uc",d=a.split("ucbrowser/")[1].split(" ")[0]):-1!=a.indexOf("baiduboxapp")?
(c="baidubrowser",d=a.split("baiduboxapp/")[1].split(" ")[0]):-1!=a.indexOf("chrome")||-1!=a.indexOf("crios")?(c="chrome",-1!=a.indexOf("chrome")&&(d=a.split("chrome/")[1].split(" ")[0]),-1!=a.indexOf("crios")&&(d=a.split("crios/")[1].split(" ")[0])):-1!=a.indexOf("android")?(c="original",d=-1!=a.indexOf("applewebkit/")?a.split("applewebkit/")[1].split(" ")[0]:"0"):-1!=a.indexOf("mac os x")?(c="safari",d=a.split("applewebkit/")[1].split(" ")[0]):(c=a.trimAll(),d="unmobile");break;case "pc":/MSIE \d+\.\d+/.test(a)?
(d=/MS(IE) (\d+\.\d+)/.exec(a),c=d[1],d=d[2]):-1!=a.indexOf("qqbrowser")?(c="qqbrowser",d=a.split("qqbrowser/")[1].split(" ")[0]):/[Cc]hrome\/\d+/.test(a)?(d=/([Cc]hrome)\/(\d+)/.exec(a),c=d[1],-1!=a.indexOf("metasr")&&(c="sogou"),d=d[2]):/[Ff]irefox(\/\d+\.\d+)/.test(a)?(d=/([Ff]irefox)\/(\d+\.\d+)/.exec(a),c=d[1],d=d[2]):/[Vv]ersion\/(\d+\.\d) ([Ss]afari)/.test(a)?(d=/[Vv]ersion\/(\d+\.\d) ([Ss]afari)/.exec(a),c=d[2],d=d[1]):/[Oo]pera.+[Vv]ersion\/\d+\.\d+/.test(a)?(d=/([Oo]pera).+[Vv]ersion\/(\d+)\.\d+/.exec(a),
c=d[1],d=d[2]):(c="unknown",d="unwindow");break;default:c="unknown",d="unpc"}b.PTTBrowser=c;b.PTTBrowserVer=parseFloat(d.split(".")[0]+"."+d.split(".")[1]);MossoSendClick("browserInfo",b.PTTBrowser+b.PTTBrowserVer,"\u6d4f\u89c8\u5668\u4fe1\u606f",PTTRun.virtualURL)};b.PTTNetType=function(){if(-1!=a.indexOf("nettype/")){var b=-1==a.indexOf(" ",a.indexOf("nettype/"))?20:a.indexOf(" ",a.indexOf("nettype/"))-a.indexOf("nettype/")-8;b=a.substr(a.indexOf("nettype/")+8,b)}else b="undefined"!=typeof navigator.connection&&
"undefined"!=typeof navigator.connection.type?navigator.connection.type:-1!=a.indexOf("iphone")||-1!=a.indexOf("ipad")||-1!=a.indexOf("ipod")||-1!=a.indexOf("android")?"mobileUnknown":"PCNetwork";return b}();b.getPixel=function(){var c=document.documentElement.clientWidth,e=document.documentElement.clientHeight,f=window.devicePixelRatio?window.devicePixelRatio:1;if(-1!=a.indexOf("iphone")||-1!=a.indexOf("ipad")||-1!=a.indexOf("ipod")||-1!=a.indexOf("android")){var g=window.screen.width,h=c,k=window.screen.height;
Math.max(g,k)==h?h=g:k*=c/g;h>k&&(g=k,k=h,h=g);c>e&&(g=e,e=c,c=g)}else h=window.screen.width,k=window.screen.height;b.PTTPixelWidth=parseInt(h*f);b.PTTPixelHeight=parseInt(k*f);b.PTTViewPixelWidth=parseInt(c*f);b.PTTViewPixelHeight=parseInt(e*f);MossoSendClick("devicesize",b.PTTPixelWidth+"x"+b.PTTPixelHeight,"\u8bbe\u5907\u5c3a\u5bf8",PTTRun.virtualURL);MossoSendClick("viewsize",b.PTTViewPixelWidth+"x"+b.PTTViewPixelHeight,"\u53ef\u89c6\u5c3a\u5bf8",PTTRun.virtualURL)}};b.unitParams();b.autoSend=
function(){-1==location.href.indexOf("qq.com/ingame")&&-1==location.href.indexOf("qq.com/g/")||MossoSendClick("mc","","\u5fae\u793e\u533a",PTTRun.virtualURL);b.routeLine();b.getAv();b.reach();MossoSendClick("systemInfo",b.PTTSystem+b.PTTSystemVer,"\u7cfb\u7edf\u4fe1\u606f",PTTRun.virtualURL);b.detectBrowser();b.getPixel();MossoSendClick("netType",b.PTTNetType,"\u7f51\u7edc\u7c7b\u578b",PTTRun.virtualURL);switch(b.oldUser){case "newUsers":MossoSendClick("user","newUsers","\u65b0\u7528\u6237",PTTRun.virtualURL);
break;case "old":MossoSendClick("user","old","\u8001\u7528\u6237",PTTRun.virtualURL);break;case "is2WeekUser":MossoSendClick("user","2week","\u5468\u7528\u6237",PTTRun.virtualURL);break;case "is1MonthUser":MossoSendClick("user","1month","1\u6708\u7528\u6237",PTTRun.virtualURL);break;case "is2MonthUser":MossoSendClick("user","2month","2\u6708\u7528\u6237",PTTRun.virtualURL)}b.exposure(window)};b.exposure=function(a){function c(b,c,d){var f=a.document.body;if(void 0===c||"function"===typeof c)d=c,c=
{};f=c.container||f;c=c.offset||0;for(var g=0;g<l.length;g++)if(l[g].container===f)return l[g].isInViewport(b,c,d);return l[l.push(e(f))-1].isInViewport(b,c,d)}function d(a,b,c){var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(e,f)},b);g&&a.apply(e,f)}}function e(c){function e(a,b,c){return{watch:function(){k.add(a,b,c)},dispose:function(){k.remove(a)}}}function h(b,d){if(!(p(a.document.documentElement,b)&&p(a.document.documentElement,
c)&&b.offsetWidth&&b.offsetHeight))return!1;var e=b.getBoundingClientRect();if(c===a.document.body){b=-d;var f=-d;var g=a.document.documentElement.clientWidth+d;d=a.document.documentElement.clientHeight+d}else{var h=c.getBoundingClientRect();b=h.top-d;f=h.left-d;g=h.right+d;d=h.bottom+d}return e.right>=f&&e.left<=g&&e.bottom>=b&&e.top<=d}var k=f(),A=c===a.document.body?a:c,l=d(k.checkAll(function(a,b,c){h(a,b)&&(k.remove(a),c(a))}),15);b.addEvent(A,"scroll",l);A===a&&b.addEvent(a,"resize",l);m&&g(k,
c,l);setInterval(l,150);return{container:c,isInViewport:function(a,b,c){if(!c)return h(a,b);a=e(a,b,c);a.watch();return a}}}function f(){function a(a){for(var b=c.length-1;0<=b;b--)if(c[b][0]===a)return b;return-1}function b(b){return-1!==a(b)}var c=[];return{add:function(a,d,e){b(a)||c.push([a,d,e])},remove:function(b){b=a(b);-1!==b&&c.splice(b,1)},isWatched:b,checkAll:function(a){return function(){for(var b=c.length-1;0<=b;b--)a.apply(this,c[b])}}}}function g(a,b,c){function d(b){b=g.call([],Array.prototype.slice.call(b.addedNodes),
b.target);return 0<f.call(b,a.isWatched).length}var e=new MutationObserver(function(a){!0===a.some(d)&&setTimeout(c,0)}),f=Array.prototype.filter,g=Array.prototype.concat;e.observe(b,{childList:!0,subtree:!0,attributes:!0})}function h(b){var c=[];if("function"==typeof a.document.querySelectorAll)c=Array.prototype.slice.call(a.document.querySelectorAll("["+b+"]"));else for(var d=document.getElementsByTagName("*"),e=0;e<d.length;e++){var f=d[e];f.getAttribute(b)&&c.push(f)}return c}function k(a,b){b||
(b=location.href);a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(b);return null==a?null:a[1]}var l=[],m="function"===typeof a.MutationObserver,p=a.document.documentElement.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:a.document.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!1)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},n=document.currentScript||function(){var a=document.getElementsByTagName("script");
return a[a.length-1]}(),r=k("prefix",n.src)||"";n=parseInt(k("autorun",n.src)||1);var t=function(){u(r)},u=function(a){r=a||r;for(var d=h("exposure-tag"),e=0;e<d.length;e++)(function(){var a=e,c=d[a].getAttribute("exposure-tag").split(",");b.addEvent(d[a],"click",function(){MossoSendClick&&MossoSendClick("hotspot",c[0],c[1],PTTRun.virtualURL)})})(),c(d[e],function(a){a=a.getAttribute("exposure-tag").split(",");MossoSendClick&&MossoSendClick("exposure",a[0],a[1],PTTRun.virtualURL)})},v=function(){var a=
[],c,d=document,e=(d.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(d.readyState);e||b.addEvent(d,"DOMContentLoaded",c=function(){d.removeEventListener("DOMContentLoaded",c);for(e=1;c=a.shift();)c()});return function(b){e?setTimeout(b,0):a.push(b)}}();n?v(t):function(){window.exposure={};exposure.run=function(a){u(a)}}()};b.newStayTime=function(a){for(var b=[3,7,10,15,30,60,90,120,180,300,600,900,1800,3600],d="infinite",e=1,f=b.length;e<f;e++)if(a<b[e]){d=b[e-1];break}MossoSendClick("newStayTime",
d,"\u505c\u7559\u65f6\u957f",PTTRun.virtualURL)}}})();window.console=window.console||function(){var k={};k.log=k.warn=k.debug=k.info=k.error=k.time=k.dir=k.profile=k.clear=k.exception=k.trace=k.assert=function(){};return k}();